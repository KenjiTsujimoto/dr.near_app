<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <style>
    .angular-google-map-container {
      width: 100%;
      height: 504px;
  }
  </style>

  <link href="/css/preview-frame.css" rel="stylesheet">
  <link href="lib/ionic/css/ionic.css" rel="stylesheet">

  <!-- ionic/angularjs js -->
  <script src="lib/ionic/js/ionic.bundle.js"></script>
  <script src="js/app.js"></script>
    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
-->


<script>
// Ionic Starter App

// angular.module is a global place for creating, registering and retrieving Angular modules
// 'starter' is the name of this angular module example (also set in a <body> attribute in index.html)
// the 2nd parameter is an array of 'requires'
// 'starter.services' is found in services.js
// 'starter.controllers' is found in controllers.js
//angular.module('app', ['ionic'])
//↓追加
var module = angular.module( 'Myapp', ['ionic'] );
module.controller( 'MyController', ['$scope',
    function($scope){
        $scope.users = [
        { 
          name : "Nakagawa Shintaro", 
          position : "patient",
          diseases : "Hand-Schuller-Christain", 
          medicine :"Grivec"},
        ];
        $scope.timelines = [
        { 
          title: "medicine", 
          comment:"I'm not much better,and there is a little hope of recovery",
          userphoto :"user photo"}
        ];
        $scope.diseases = [ 
        { 
          name: 'Distal Myopathy', 
          medicines: [ 
            { name: 'medicine1', 
              users: [ 
                { name: 'userA' }, 
                { name: 'userB' }, 
                { name: 'userC'} 
              ] 
            },
            { name: 'medicine2', 
              users: [ 
                { name: 'userD' }, 
                { name: 'userE' } 
              ] 
            },
            { name: 'medicine3', 
              users: [ { name: 'userF' } 
              ] 
            },
            { name: 'medicine4',
              users: [ { name: 'userG' } 
              ] 
            },
            { name: 'medicine5', 
              users: [ { name: 'userH' } 
              ] 
            } 
          ] 
        },

        { 
          name: 'Hand-Schuller-Christain disease', 
          medicines: [ 
            { name: 'medicine6', 
              users: [ 
                { name: 'userI' } 
              ] 
            } 
          ]  
        },

        { name: 'muscular dystrophy',
          medicines:[ 
            { name: 'medicine7', 
              users: [ 
                { name: 'userJ' }
              ] 
            },
            { name: 'medicine8', 
              users: [ { name: 'userK' } 
              ] 
            },
            { name: 'medicine9', 
              users: [ { name: 'userL' } 
              ] 
            } 
          ] 
        },
       ];
    } ] )


.run(function($ionicPlatform) {
  $ionicPlatform.ready(function() {
    // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard
    // for form inputs)
  if(window.cordova && window.cordova.plugins.Keyboard) {
      cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);
  }
  if(window.StatusBar) {
      // org.apache.cordova.statusbar required
      StatusBar.styleDefault();
  }
});
})

.config(function($stateProvider, $urlRouterProvider) {

  // Ionic uses AngularUI Router which uses the concept of states
  // Learn more here: https://github.com/angular-ui/ui-router
  // Set up the various states which the app can be in.
  // Each state's controller can be found in controllers.js
  $stateProvider

  .state('page12', {
      url: '/page12',
      templateUrl: 'page12.html'
  })

  .state('modal2', {
      url: '/modal',
      templateUrl: 'modal2.html'
  })

  .state('page16', {
      url: '/page16',
      templateUrl: 'page16.html'
  })

  .state('home', {
      url: '/home',
      templateUrl: 'home.html'
  })

  .state('modal3', {
      url: '/modal',
      templateUrl: 'modal3.html'
  })
  ;

  // if none of the above states are matched, use this as the fallback
  
  $urlRouterProvider.otherwise('/home');
  
});


</script>
</head>
<body ng-app="Myapp" animation="slide-left-right-ios7">
  <div>
    <div>
        <ion-nav-bar class="bar-stable">
        <ion-nav-back-button class="button-icon icon ion-ios7-arrow-back">Back</ion-nav-back-button>
    </ion-nav-bar>
    <ion-nav-view></ion-nav-view>
</div>
</div>

<div class="bar bar-header">
  <button class="button button-icon icon ion-navicon"></button>
  <div class="h1 title">Dr.near</div>
  <button class="button button-clear button-positive">Edit</button>
</div>


<script id="modal2.html" type="text/ng-template">
<div class="modal">
<ion-header-bar class="bar-stable">
<h1 class="title">About disease</h1>
<div class="buttons">
<button class="button button-stable button-clear">Close</button>
</div>
</ion-header-bar>
<ion-content padding="true" scroll="false" class="has-header">
<ion-list></ion-list>
<div class="list card">
<div class="item item-divider">Distal Myopathy</div>
<div class="item item-body">
<div>
<p>

The distal dystrophies, or DDs, are caused by many different genetic defects, not all of which are yet known. Also, some of the DDs have been given different names based on various symptoms but may actually be caused by defects in the same gene.
</p>
</div>
</div>
</div>
<button class="button button-calm button-outline">Medicine</button>
<ion-list>
<ion-item class="item-thumbnail-left">
<img src="/img/avatar-img.png">
<h2>medicine1</h2>
<p>and 5 users</p>
<div class="button-bar"></div>
<img src="sample.gif" alt="サンプル" width="170" height="30">
</ion-item>
<ion-item class="item-thumbnail-left">
<img src="/img/avatar-img.png">
<h2>medicine2</h2>
<p>1 user</p>
</ion-item>
<ion-item>Item 2</ion-item>
<ion-item>Item 3</ion-item>
</ion-list>
<button class="button button-stable button-block">Tap me!</button>
</ion-content>
</div></script>

<script id="page16.html" type="text/ng-template">
<ion-view title="Plus 1">
<ion-content padding="true" class="has-header">
<button class="button button-stable button-block">+add disease</button>
<button class="button button-stable button-block">+add medicine</button>
<button class="button button-stable button-block">+add condition</button>
</ion-content>
</ion-view></script>

<script id="home.html" type="text/ng-template">
  <ion-view title="Dr.near">
    <ion-tabs class="tabs-stable tabs-icon-top">
      <div ng-controller="MyController">
      <ion-tab title="Home" icon="ion-home">
        <ion-content padding="true" class="has-header">
          <ion-list>
            <ion-item class="item-thumbnail-left">
            <img src="/img/avatar-img.png">
            <h2 ng-repeat="user in users">{{user.name}}</h2>
            <p ng-repeat="user in users">{{user.position}}</p>
            <h3 ng-repeat="user in users">{{user.diseases}}</h3>
            <h3 ng-repeat="user in users">{{user.medicine}}</h3>
            </ion-item>
          </ion-list>

          <div class="button-bar">
            <button class="button button-light ">message</button>
          </div>
          <div class="spacer" style="width: 300px; height: 41px;"></div>
            <div class="list card">
            <div ng-repeat ="timeline in timelines">
              <div class="item item-divider">{{timeline.title}} was updated.</div>
              <div class="item item-body">{{timeline.comment}}</div>
              <div class="item item-divider">{{timeline.userphoto}}</div>
            </div>
            </div>
        <div class="list card">
                <div class="item item-divider">Timeline2</div>
                <div class="item item-body">
                  <div>
                  <p>
                  <strong>checked diseasechecked diseasechecked diseasechecked diseasechecked disease</strong>
                  </p>
                  </div>
                </div>
              <div class="item item-divider">update photo(user or staff)2</div>
            </div>
          </ion-content>
        </ion-tab>

          <ion-tab title="Search" icon="ion-search">
          <ion-content padding="true" class="has-header">
            
                          <div>
                <div class="bar bar-header item-input-inset">
                  <label class="item-input-wrapper">
                  <i class="icon ion-ios7-search placeholder-icon"></i>
                  <input type="search" ng-model="keyword" placeholder="Please put it disease or medicine name">
                  </label>
                  <button class="button button-clear">
                  Cancel
                  </button>
                </div>
              </div>
          //　users・medicineを出力
              <div class="list card"> 
                <div class="item item-body">
                  <div class="button button-stable button-block" ng-repeat = "disease in diseases | filter:keyword" >
                  <ion-list>
                  <h2>{{ disease.name }}<button class="button icon-left ion-star button-positive"></button></h2>
                    <div ng-repeat = "medicine in disease.medicines">
                    <ion-item class="medicine"><h3>{{ medicine.name}}</h3></ion-item>
                      <span ng-repeat="user in medicine.users">{{user.name}}
                      </span>
                    </div>
                  </div>
                  </ion-list>
                </div>
              </div>
            
          </ion-content>
          </ion-tab>

<ion-tab title="alert" icon="ion-ios7-bell">
<ion-content padding="true" class="has-header">
<ion-list>
<ion-item>usernameからメッセージを受け取りました</ion-item>
<ion-item>興味のある病気に新しい処方箋が追加されました</ion-item>
<ion-item>病気にコンディション(副作用,状態)が追加されました</ion-item>
<ion-item>病気に()</ion-item>
<ion-item>Item 2</ion-item>
<ion-item>Item 3</ion-item>
</ion-list>
</ion-content>
</ion-tab>

</div>
</ion-tabs>
</ion-view></script>
</body>
</html>
